---
date: 2024-09-06
tags:
  - Процедурне_програмування
  - Основи
---
**Пробіли** - це термін, який позначає символи, що використовуються для форматування. У C++ це насамперед пробіли, табуляції та нові рядки. Пробіли у C++ зазвичай використовуються для 3 цілей: відокремлення певних елементів мови, всередині тексту та для форматування коду.
## Деякі мовні елементи повинні бути відокремлені пробілами
Синтаксис мови вимагає, щоб деякі елементи були відокремлені пробілами. Це здебільшого відбувається, коли два ключових слова або ідентифікатори мають бути розміщені підряд, щоб компілятор міг їх розрізнити.

Наприклад, оголошення змінної має бути відокремлене пробілами:

```cpp
int x; // int and x must be whitespace separated
```

Якби ми набрали `intx`, компілятор інтерпретував би це як ідентифікатор, а потім поскаржився б, що не знає, що таке ідентифікатор `intx`.

Інший приклад: тип повернення та ім'я функції мають бути відокремлені пробілами:

```cpp
int main(); // int and main must be whitespace separated
```

Коли пробіли потрібно використовувати як роздільник, компілятору байдуже, скільки пробілів буде використано, аби вони були.

Наступні визначення змінних є правильними:

```cpp
int x;
int                y;
            int
z;
```

У деяких випадках як роздільник використовується новий рядок. Однорядкові коментарі завершуються новим рядком.

Наприклад, якщо ви зробите щось подібне, у вас можуть виникнути проблеми:

```cpp
std::cout << "Hello world!"; // This is part of the comment and
this is not part of the comment
```

Директиви препроцесора (наприклад, `#include <iostream>`) повинні бути розміщені в окремих рядках:

```cpp
#include <iostream>
#include <string>
```
## У цитованому тексті кількість пробілів сприймається буквально
Усередині цитованого тексту кількість пробілів сприймається буквально.

```cpp
std::cout << "Hello world!";
```

відрізняється від того:

```cpp
std::cout << "Hello          world!";
```

У цитованому тексті не дозволяється переносити рядки:

```cpp
std::cout << "Hello
     world!"; // Not allowed!
```

Цитований текст, відокремлений пробілами (пробілами, табуляцією або переходом на новий рядок), буде об'єднано в одне ціле:

```cpp
std::cout << "Hello "
     "world!"; // prints "Hello world!"
```
## Використання пробілів для форматування коду
В іншому випадку пробіли зазвичай ігноруються. Це означає, що ми можемо використовувати пробіли будь-де для форматування нашого коду, щоб полегшити його читання.

Наприклад, наступне досить важко читати:

```cpp
#include <iostream>
int main(){std::cout<<"Hello world";return 0;}
```

Наступні краще (але все ще досить щільні):

```cpp
#include <iostream>
int main() {
std::cout << "Hello world";
return 0;
}
```

А наступне - ще краще:

```cpp
#include <iostream>

int main()
{
    std::cout << "Hello world";

    return 0;
}
```

За бажанням, твердження можна розбити на кілька рядків:

```cpp
#include <iostream>

int main()
{
    std::cout
        << "Hello world"; // works fine
    return 0;
}
```

Це може бути корисно для особливо довгих заяв.
## Базове форматування
На відміну від деяких інших мов, C++ не накладає на програміста жодних обмежень на форматування. З цієї причини ми говоримо, що C++ є незалежною від пробілів мовою.

Це змішане благословення. З одного боку, приємно мати свободу робити все, що завгодно. З іншого боку, протягом багатьох років було розроблено багато різних методів форматування програм на C++, і ви знайдете (іноді значні і відволікаючі) розбіжності щодо того, які з них є найкращими. Наше основне емпіричне правило полягає у тому, що найкращі стилі - це ті, які створюють найбільш читабельний код і забезпечують найбільшу узгодженість.

Ось наші рекомендації щодо базового форматування:
1. Для відступів можна використовувати як табуляцію, так і пробіли (більшість IDE мають налаштування, за допомогою яких ви можете перетворити натискання табуляції на відповідну кількість пробілів). Розробники, які надають перевагу пробілам, як правило, роблять це тому, що це гарантує точне вирівнювання коду, незалежно від того, який редактор або налаштування використовуються. Прихильники використання табуляції дивуються, чому б не використовувати для відступів символ, призначений для відступів, тим більше, що ви можете встановити ширину відповідно до ваших особистих уподобань. Тут немає правильної відповіді - і сперечатися про це все одно, що сперечатися про те, що краще: торт чи пиріг. Зрештою, все зводиться до особистих уподобань.

У будь-якому випадку, ми рекомендуємо встановлювати відступи для табуляції на 4 пробіли. Деякі IDE за замовчуванням встановлюють відступи у 3 пробіли, що також є нормальним.

1. Існує два загальноприйнятих стилі функціональних брекетів.

Багато розробників вважають за краще розміщувати відкриваючу фігурну дужку на тому ж рядку, що й оператор:

```cpp
int main() {
    // statements here
}
```

Це пояснюється тим, що це зменшує кількість вертикальних пробілів (оскільки ви не відводите цілий рядок під відкриваючу фігурну дужку), тому ви можете вмістити більше коду на екрані. Це покращує сприйняття коду, оскільки вам не потрібно прокручувати його так часто, щоб зрозуміти, що він робить.

Однак у цій серії уроків ми скористаємося поширеним варіантом, коли відкриваюча фігурна дужка з'являється у власному рядку:

```cpp
int main()
{
    // statements here
}
```

Це покращує читабельність і зменшує ймовірність помилок, оскільки ваші пари дужок завжди повинні мати відступи на одному рівні. Якщо ви отримаєте помилку компілятора через невідповідність дужок, дуже легко зрозуміти, де саме.

1. Кожен оператор у фігурних дужках повинен починатися на одну табуляцію нижче від відкриваючої дужки функції, до якої він належить. Наприклад:

```cpp
int main()
{
    std::cout << "Hello world!\n"; // tabbed in one tab (4 spaces)
    std::cout << "Nice to meet you.\n"; // tabbed in one tab (4 spaces)
}
```

1. Рядки не повинні бути занадто довгими. Як правило, 80 символів є де-факто стандартом для максимальної довжини рядка. Якщо рядок має бути довшим, його слід розбити (в розумному місці) на кілька рядків. Це можна зробити, відступивши кожен наступний рядок додатковим табулятором, або, якщо рядки схожі, вирівнявши його за рядком вище (залежно від того, що зручніше для читання).

```cpp
int main()
{
    std::cout << "This is a really, really, really, really, really, really, really, "
        "really long line\n"; // one extra indentation for continuation line

    std::cout << "This is another really, really, really, really, really, really, really, "
                 "really long line\n"; // text aligned with the previous line for continuation line

    std::cout << "This one is short\n";
}
```

Це полегшує читання ваших рядків. На сучасних широкоформатних моніторах це також дозволяє розмістити два вікна зі схожим кодом поруч і легше їх порівнювати.

> [!tip] 
> Подумайте про те, щоб довжина ваших рядків не перевищувала 80 символів.

1. Якщо довгий рядок розділяється оператором (наприклад, << або +), оператор слід розміщувати на початку наступного рядка, а не в кінці поточного рядка

```cpp
std::cout << 3 + 4
    + 5 + 6
    * 7 * 8;
```

Це допомагає зробити більш зрозумілим, що наступні рядки є продовженням попередніх, і дозволяє вирівняти оператори зліва, що полегшує читання.

1. Використовуйте пробіли, щоб полегшити читання коду, вирівнюючи значення чи коментарі або додаючи інтервали між блоками коду.

Важко читати:

```cpp
cost = 57;
pricePerItem = 24;
value = 5;
numberOfItems = 17;
```

Легше читати:

```cpp
cost          = 57;
pricePerItem  = 24;
value         = 5;
numberOfItems = 17;
```

Важко читати:

```cpp
std::cout << "Hello world!\n"; // cout lives in the iostream library
std::cout << "It is very nice to meet you!\n"; // these comments make the code hard to read
std::cout << "Yeah!\n"; // especially when lines are different lengths
```

Легше читати:

```cpp
std::cout << "Hello world!\n";                  // cout lives in the iostream library
std::cout << "It is very nice to meet you!\n";  // these comments are easier to read
std::cout << "Yeah!\n";                         // especially when all lined up
```

Важко читати:

```cpp
// cout lives in the iostream library
std::cout << "Hello world!\n";
// these comments make the code hard to read
std::cout << "It is very nice to meet you!\n";
// especially when all bunched together
std::cout << "Yeah!\n";
```

Легше читати:

```cpp
// cout lives in the iostream library
std::cout << "Hello world!\n";

// these comments are easier to read
std::cout << "It is very nice to meet you!\n";

// when separated by whitespace
std::cout << "Yeah!\n";
```

Ми будемо дотримуватися цих умовностей протягом усього підручника, і вони стануть для вас другою натурою. Коли ми будемо знайомити вас з новими темами, ми будемо вводити нові рекомендації щодо стилю, які будуть відповідати цим особливостям.

Зрештою, C++ дає вам можливість вибирати той стиль, який ви вважаєте найбільш зручним для себе або найкращим. Однак, ми наполегливо рекомендуємо вам використовувати той самий стиль, який ми використовуємо для наших прикладів. Він був перевірений тисячами програмістів на мільярдах рядків коду і оптимізований для успіху.

Один виняток: Якщо ви працюєте з чужою кодовою базою, прийміть її стилі. Краще віддати перевагу узгодженості, ніж власним уподобанням.

> [!tip] Title
> Працюючи в існуючому проекті, дотримуйтесь стилю, який вже було прийнято.
## Автоматичне форматування
Більшість сучасних IDE допоможуть вам відформатувати код під час введення (наприклад, коли ви створюєте функцію, IDE автоматично зробить відступи для операторів всередині тіла функції).

Однак, коли ви додаєте або видаляєте код, змінюєте форматування IDE за замовчуванням або вставляєте блок коду, який має інше форматування, форматування може зіпсуватися. Виправлення форматування частини або всього файлу може стати справжнім головним болем. На щастя, сучасні IDE зазвичай містять функцію автоматичного форматування, яка переформатує або виділений фрагмент (виділений мишею), або весь файл.

Для полегшення доступу ми рекомендуємо додати комбінацію клавіш для автоматичного форматування активного файлу.

Існують також зовнішні інструменти, які можна використовувати для автоматичного форматування коду. clang-format - популярний з них.

> [!tip] 
> Наполегливо рекомендується використовувати функцію автоматичного форматування, щоб зберегти єдиний стиль форматування вашого коду.
## Посібники зі стилю
Посібник зі стилю - це стислий документ, що містить (іноді довільні) конвенції програмування, настанови щодо форматування та найкращі практики. Мета посібника зі стилю - гарантувати, що всі розробники проекту програмують однаково.

Деякі з найпоширеніших посібників зі стилів C++ включають:

- [C++ Core Guidelines](http://isocpp.github.io/CppCoreGuidelines/CppCoreGuidelines), maintained by Bjarne Stroustrup and Herb Sutter.
- [Google](https://google.github.io/styleguide/cppguide.html).
- [LLVM](https://llvm.org/docs/CodingStandards.html)
- [GCC/GNU](https://gcc.gnu.org/codingconventions.html)

Ми, як правило, віддаємо перевагу Основним настановам з C++, оскільки вони є актуальними і широко застосовуються.